<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Survivors Web</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<div id="wrap">
    <canvas id="game"></canvas>

    <div id="hud">
        <div class="row">
            <div class="pill"><span class="k">时间</span><span id="time">00:00</span></div>
            <div class="pill"><span class="k">等级</span><span id="level">1</span></div>
            <div class="pill"><span class="k">HP</span><span id="hp">100 / 100</span></div>
        </div>

        <div class="row">
            <div class="xpbar">
                <div class="xpfill" id="xpfill"></div>
                <div class="xptxt" id="xptxt">XP 0 / 10</div>
            </div>
        </div>

        <div class="row small">
            <div class="pill"><span class="k">击杀</span><span id="kills">0</span></div>
            <div class="pill"><span class="k">怪物</span><span id="enemies">0</span></div>
            <div class="pill"><span class="k">FPS</span><span id="fps">60</span></div>
            <div class="pill"><span class="k">连锁</span><span id="combo">x0</span></div>
            <div class="pill"><span class="k">怒气</span><span id="rage">0%</span></div>
            <div class="pill"><span class="k">暴击</span><span id="crit">0%</span></div>
            <div class="pill eventPill"><span class="k">事件</span><span id="event">-</span></div>
        </div>
    </div>

    <div id="minimapWrap">
        <canvas id="minimap"></canvas>
        <div id="minimapLabel">MINIMAP</div>
    </div>

    <div id="overlay" class="hidden">
        <div id="card">
            <h2 id="ovTitle">升级！选择一项</h2>
            <div id="rewardCinematic" class="hidden"></div>
            <div id="choices"></div>
            <div class="hint">键盘：1/2/3 选择；WASD/方向键移动；空格冲刺；P 暂停</div>
        </div>
    </div>

    <div id="mobile" class="hidden">
        <div id="stick">
            <div id="stickBase"></div>
            <div id="stickKnob"></div>
        </div>
        <button id="dashBtn">冲刺</button>
        <button id="pauseBtn">暂停</button>
    </div>

    <div id="menu">
        <div class="menuCard">
            <h1>Survivors Web</h1>
            <p class="muted">移动躲怪 · 自动攻击 · 吃经验升级 · 三选一成长</p>
            <div class="diffWrap">
                <div class="k">难度模式</div>
                <div class="diffRow" id="diffRow">
                    <button class="diffBtn" data-diff="blast">爽爆</button>
                    <button class="diffBtn active" data-diff="normal">中等</button>
                    <button class="diffBtn" data-diff="hard">困难</button>
                </div>
            </div>
            <div class="btnRow">
                <button id="startBtn">开始</button>
                <button id="howBtn">玩法</button>
                <button id="resetBtn">重置存档</button>
                <button id="soundBtn">音效：开</button>
                <button id="musicBtn">音乐：开</button>
            </div>
            <div id="how" class="muted hidden">
                <ul>
                    <li>目标：尽可能存活更久。</li>
                    <li>自动攻击最近敌人（已加入扇形喷射/链电/炸弹/落雷/旋风）。</li>
                    <li>精英和 Boss 会掉落宝箱，宝箱可连开多次奖励。</li>
                    <li>武器满级 + 指定被动，可在升级池中触发武器进化。</li>
                    <li>每 30 秒触发怪潮，5 分钟刷新 Boss。</li>
                    <li>连续击杀会触发连锁奖励；怒气满后进入暴走；攻击可暴击。</li>
                    <li>右上角小地图会显示地标、敌群和 Boss 位置。</li>
                    <li>地图包含固定地标（祭坛/遗迹/尖碑等）与碰撞。</li>
                    <li>电脑：WASD/方向键，空格冲刺，P 暂停，M 音效开关，B 音乐开关，ESC 关闭面板。</li>
                    <li>手机：左下摇杆移动，右侧按钮冲刺/暂停。</li>
                </ul>
            </div>
            <div class="muted tiny">纯前端静态文件，可直接部署到 GitHub Pages。</div>
        </div>
    </div>

    <div id="versionTag">V2.2.3</div>

</div>

<script src="game.js"></script>
</body>
</html>
